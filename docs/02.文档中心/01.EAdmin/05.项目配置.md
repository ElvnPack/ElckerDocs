---
title: 项目配置
date: 2021-06-15 19:38:35
permalink: /pages/93efa9/
categories: 
  - 文档中心
  - EAdmin
tags: 
  - 
---

介绍 vite2.0 在本项目中的使用方式，具体使用及属性说明以官方文档为主 [vite文档](https://vitejs.cn/)

## 配置说明

vite.config 为vite 的配置入口，但为了简化，归类及封装一些常用的配置内容，EAdmin将公共配置文件转移至：build/vite下（参见目录说明）

### 别名配置

在vite.config下进行配置，配置内容参见：

``` js

alias: [
    {
      find: "@",
      replacement: pathResolve("src"),
    },
    {
      find: "~",
      replacement: pathResolve("build"),
    },
    // /#/xxxx => types/xxxx
    {
      find: "#",
      replacement: pathResolve("src/types"),
    },
    {
      find: "#B",
      replacement: pathResolve("build/types"),
    },
    // ['@vue/compiler-sfc', '@vue/compiler-sfc/dist/compiler-sfc.esm-browser.js'],
    {
      find: "_c",
      replacement: pathResolve("src/components"),
    },
    // mock
    {
      find: "_m",
      replacement: pathResolve("mock"),
    },
  ],

```

### css 配置

vite 默认支持 postcss, EAdmin在postcss的配置内容放置于：build/vite/css 下

### plugins 配置

入口文件：build/vite/plugins/index.ts

### 代理服务配置

代理服务配置的内容转移到了测试环境.env.test 文件夹中，

  属性名称：VITE_SERVER_PROXY

  属性值：[["/dev-api","https://localhost/"]]

  该属性值为字符串数组，可根据实际情况进行配置

  关于字符串的解析处理参见：build/vite/server/proxy.ts

## 规范

规范的目的是让前端开发者在进行代码编写时，按照统一的格式进行编写，一来可以提高代码质量及阅读，二来也可以降低代码的出错，提高质量降低困难，

当然他也不是必须的，你也可根据自己团队的实际情况进行抉择。

### eslint

#### 说明

ESLint 是一个代码规范和错误检查工具，[官网](https://eslint.bootcss.com/)

#### 校验方式

这是全局，手工命令的方式

npm run lint:eslint

若需要修改配置，可对项目目录下的eslint/eslintignore进行调整

#### VSCODE配置

安装eslint插件即可

### commitlint

用于规范项目git的提交信息

#### 配置

项目根目录下commitlint.config.js进行配置

#### git hook

husky是git hook工具，文件格式 .huskyrc，它能帮你阻挡不好的代码提交和推送

1.提交格式（冒号后面有空格）：

```js
'<type>[scope]: <subject>'
// eg: git commit -m 'feat: 增加什么功能'

```

type|subject 必选，scope 可选；

scope 可省略，用于说明commit的影响范围和模块；

subject 是commit的目的简短描述，可以配置最大长度限制，配置72字符；

type 规范

* build 项目构建的提交
* feat 增加新功能
* upd 更新某个功能
* fix 修复问题/BUG
* style 代码风格相关无影响运行结果的
* perf 优化/性能提升
* refactor 重构
* revert 撤销修改
* test 测试相关
* docs 文档/注释
* chore 依赖更新/脚手架配置修改等
* workflow 工作流改进
* ci 持续集成
* mod 不确定分类的修改
* wip 开发中
* types 类型修改

package.json 配置

```nodejs
"husky": {
    "hooks": {
      // "pre-commit": "lint-staged",  //钩子命令用于提交前运行检查，看项目情况决定要不要使用
      "commit-msg": "commitlint -e $HUSKY_GIT_PARAMS"
    }
  }

```

lint-staged 用于自动修复提交文件风格问题

配置规则代码如下:

``` nodejs
  rules: {
    'body-leading-blank': [2, 'always'],
    'footer-leading-blank': [1, 'always'],
    'header-max-length': [2, 'always', 108],
    'subject-empty': [2, 'never'],
    'type-empty': [2, 'never'],
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'perf',
        'style',
        'docs',
        'test',
        'refactor',
        'build',
        'ci',
        'chore',
        'revert',
        'wip',
        'workflow',
        'types',
        'release',
      ],
    ],
  },
```

参数说明：

level: 0为disable，1为warning，2为error；

第二位: 'always'或'never'；

第三位: 值

代码实例

git commit -m 'feat(home): add home page'

如果跳过某一个检查 加上 --no-verify即可跳过git hook校验

git commit -m "xxx" --no-verify

### stylelint

统一项目内部 css 风格

配置位于根目录下stylelint.config.js

vscode 只需要安装StyleLint插件，即可在保存的时候自动格式化文件内部 css 样式

### prettler

统一代码编写风格

配置文件位于项目根目录下.prettierrc

#### 配置详情

``` nodejs
{
  // prettier的配置
  "printWidth": 120, // 超过最大值换行
  "tabWidth": 2, // 缩进字节数
  "useTabs": false, // 缩进不使用tab，使用空格
  "semi": true, // 句尾添加分号
  "vueIndentScriptAndStyle": true,
  "singleQuote": true, // 使用单引号代替双引号,字符串是否使用单引号，默认为false，使用双引号
  "proseWrap": "never", // preserve 默认值。因为使用了一些折行敏感型的渲染器（如GitHub comment）而按照markdown文本样式进行折行
  "quoteProps": "as-needed",
  "arrowParens": "avoid", // always  (x) => {} 箭头函数参数只有一个时是否要有小括号。avoid：省略括号
  "bracketSpacing": true, // 在对象，数组括号与文字之间加空格 "{ foo: bar }"
  "disableLanguages": ["vue"], // 不格式化vue文件，vue文件的格式化单独设置
  "endOfLine": "lf", // 结尾是 \n \r \n\r auto
  "eslintIntegration": false, //不让prettier使用eslint的代码格式进行校验
  "htmlWhitespaceSensitivity": "strict",
  "ignorePath": ".prettierignore", // 不使用prettier格式化的文件填写在项目的.prettierignore文件中
  "jsxBracketSameLine": false, // 在jsx中把'>' 是否单独放一行
  "jsxSingleQuote": false, // 在jsx中使用单引号代替双引号 在jsx中使用单引号代替双引号  "parser": "babylon", // 格式化的解析器，默认是babylon
  "parser": "babylon", // 格式化的解析器，默认是babylon
  "requireConfig": false, // Require a 'prettierconfig' to format prettier
  "insertPragma": false,
  "requirePragma": false,
  "rangeStart": 0,
  "stylelintIntegration": false, //不让prettier使用stylelint的代码格式进行校验
  "trailingComma": "es5", // 在对象或数组最后一个元素后面是否加逗号（在ES5中加尾逗号）
  "tslintIntegration": false // 不让prettier使用tslint的代码格式进行校验
}
```

vscode 做如下修改

![配置一](/elcker/eadmin/项目配置/prettient-01.png)

![配置二](/elcker/eadmin/项目配置/prettient-02.png)
