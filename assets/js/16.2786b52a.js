(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{432:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("介绍 vite2.0 在本项目中的使用方式，具体使用及属性说明以官方文档为主 "),a("a",{attrs:{href:"https://vitejs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vite文档"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"配置说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置说明"}},[t._v("#")]),t._v(" 配置说明")]),t._v(" "),a("p",[t._v("vite.config 为vite 的配置入口，但为了简化，归类及封装一些常用的配置内容，EAdmin将公共配置文件转移至：build/vite下（参见目录说明）")]),t._v(" "),a("h3",{attrs:{id:"别名配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#别名配置"}},[t._v("#")]),t._v(" 别名配置")]),t._v(" "),a("p",[t._v("在vite.config下进行配置，配置内容参见：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\nalias"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /#/xxxx => types/xxxx")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/types"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#B"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build/types"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ['@vue/compiler-sfc', '@vue/compiler-sfc/dist/compiler-sfc.esm-browser.js'],")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/components"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mock")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      find"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_m"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      replacement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mock"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"css-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-配置"}},[t._v("#")]),t._v(" css 配置")]),t._v(" "),a("p",[t._v("vite 默认支持 postcss, EAdmin在postcss的配置内容放置于：build/vite/css 下")]),t._v(" "),a("h3",{attrs:{id:"plugins-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins-配置"}},[t._v("#")]),t._v(" plugins 配置")]),t._v(" "),a("p",[t._v("入口文件：build/vite/plugins/index.ts")]),t._v(" "),a("h3",{attrs:{id:"代理服务配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代理服务配置"}},[t._v("#")]),t._v(" 代理服务配置")]),t._v(" "),a("p",[t._v("代理服务配置的内容转移到了测试环境.env.test 文件夹中，")]),t._v(" "),a("p",[t._v("属性名称：VITE_SERVER_PROXY")]),t._v(" "),a("p",[t._v('属性值：[["/dev-api","https://localhost/"]]')]),t._v(" "),a("p",[t._v("该属性值为字符串数组，可根据实际情况进行配置")]),t._v(" "),a("p",[t._v("关于字符串的解析处理参见：build/vite/server/proxy.ts")]),t._v(" "),a("h2",{attrs:{id:"规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规范"}},[t._v("#")]),t._v(" 规范")]),t._v(" "),a("p",[t._v("规范的目的是让前端开发者在进行代码编写时，按照统一的格式进行编写，一来可以提高代码质量及阅读，二来也可以降低代码的出错，提高质量降低困难，")]),t._v(" "),a("p",[t._v("当然他也不是必须的，你也可根据自己团队的实际情况进行抉择。")]),t._v(" "),a("h3",{attrs:{id:"eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eslint"}},[t._v("#")]),t._v(" eslint")]),t._v(" "),a("h4",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("ESLint 是一个代码规范和错误检查工具，"),a("a",{attrs:{href:"https://eslint.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"校验方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#校验方式"}},[t._v("#")]),t._v(" 校验方式")]),t._v(" "),a("p",[t._v("这是全局，手工命令的方式")]),t._v(" "),a("p",[t._v("npm run lint:eslint")]),t._v(" "),a("p",[t._v("若需要修改配置，可对项目目录下的eslint/eslintignore进行调整")]),t._v(" "),a("h4",{attrs:{id:"vscode配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode配置"}},[t._v("#")]),t._v(" VSCODE配置")]),t._v(" "),a("p",[t._v("安装eslint插件即可")]),t._v(" "),a("h3",{attrs:{id:"commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitlint"}},[t._v("#")]),t._v(" commitlint")]),t._v(" "),a("p",[t._v("用于规范项目git的提交信息")]),t._v(" "),a("h4",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("项目根目录下commitlint.config.js进行配置")]),t._v(" "),a("h4",{attrs:{id:"git-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hook"}},[t._v("#")]),t._v(" git hook")]),t._v(" "),a("p",[t._v("husky是git hook工具，文件格式 .huskyrc，它能帮你阻挡不好的代码提交和推送")]),t._v(" "),a("p",[t._v("1.提交格式（冒号后面有空格）：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<type>[scope]: <subject>'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eg: git commit -m 'feat: 增加什么功能'")]),t._v("\n\n")])])]),a("p",[t._v("type|subject 必选，scope 可选；")]),t._v(" "),a("p",[t._v("scope 可省略，用于说明commit的影响范围和模块；")]),t._v(" "),a("p",[t._v("subject 是commit的目的简短描述，可以配置最大长度限制，配置72字符；")]),t._v(" "),a("p",[t._v("type 规范")]),t._v(" "),a("ul",[a("li",[t._v("build 项目构建的提交")]),t._v(" "),a("li",[t._v("feat 增加新功能")]),t._v(" "),a("li",[t._v("upd 更新某个功能")]),t._v(" "),a("li",[t._v("fix 修复问题/BUG")]),t._v(" "),a("li",[t._v("style 代码风格相关无影响运行结果的")]),t._v(" "),a("li",[t._v("perf 优化/性能提升")]),t._v(" "),a("li",[t._v("refactor 重构")]),t._v(" "),a("li",[t._v("revert 撤销修改")]),t._v(" "),a("li",[t._v("test 测试相关")]),t._v(" "),a("li",[t._v("docs 文档/注释")]),t._v(" "),a("li",[t._v("chore 依赖更新/脚手架配置修改等")]),t._v(" "),a("li",[t._v("workflow 工作流改进")]),t._v(" "),a("li",[t._v("ci 持续集成")]),t._v(" "),a("li",[t._v("mod 不确定分类的修改")]),t._v(" "),a("li",[t._v("wip 开发中")]),t._v(" "),a("li",[t._v("types 类型修改")])]),t._v(" "),a("p",[t._v("package.json 配置")]),t._v(" "),a("div",{staticClass:"language-nodejs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"husky": {\n    "hooks": {\n      // "pre-commit": "lint-staged",  //钩子命令用于提交前运行检查，看项目情况决定要不要使用\n      "commit-msg": "commitlint -e $HUSKY_GIT_PARAMS"\n    }\n  }\n\n')])])]),a("p",[t._v("lint-staged 用于自动修复提交文件风格问题")]),t._v(" "),a("p",[t._v("配置规则代码如下:")]),t._v(" "),a("div",{staticClass:"language-nodejs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  rules: {\n    'body-leading-blank': [2, 'always'],\n    'footer-leading-blank': [1, 'always'],\n    'header-max-length': [2, 'always', 108],\n    'subject-empty': [2, 'never'],\n    'type-empty': [2, 'never'],\n    'type-enum': [\n      2,\n      'always',\n      [\n        'feat',\n        'fix',\n        'perf',\n        'style',\n        'docs',\n        'test',\n        'refactor',\n        'build',\n        'ci',\n        'chore',\n        'revert',\n        'wip',\n        'workflow',\n        'types',\n        'release',\n      ],\n    ],\n  },\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("p",[t._v("level: 0为disable，1为warning，2为error；")]),t._v(" "),a("p",[t._v("第二位: 'always'或'never'；")]),t._v(" "),a("p",[t._v("第三位: 值")]),t._v(" "),a("p",[t._v("代码实例")]),t._v(" "),a("p",[t._v("git commit -m 'feat(home): add home page'")]),t._v(" "),a("p",[t._v("如果跳过某一个检查 加上 --no-verify即可跳过git hook校验")]),t._v(" "),a("p",[t._v('git commit -m "xxx" --no-verify')]),t._v(" "),a("h3",{attrs:{id:"stylelint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stylelint"}},[t._v("#")]),t._v(" stylelint")]),t._v(" "),a("p",[t._v("统一项目内部 css 风格")]),t._v(" "),a("p",[t._v("配置位于根目录下stylelint.config.js")]),t._v(" "),a("p",[t._v("vscode 只需要安装StyleLint插件，即可在保存的时候自动格式化文件内部 css 样式")]),t._v(" "),a("h3",{attrs:{id:"prettler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prettler"}},[t._v("#")]),t._v(" prettler")]),t._v(" "),a("p",[t._v("统一代码编写风格")]),t._v(" "),a("p",[t._v("配置文件位于项目根目录下.prettierrc")]),t._v(" "),a("h4",{attrs:{id:"配置详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置详情"}},[t._v("#")]),t._v(" 配置详情")]),t._v(" "),a("div",{staticClass:"language-nodejs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  // prettier的配置\n  "printWidth": 120, // 超过最大值换行\n  "tabWidth": 2, // 缩进字节数\n  "useTabs": false, // 缩进不使用tab，使用空格\n  "semi": true, // 句尾添加分号\n  "vueIndentScriptAndStyle": true,\n  "singleQuote": true, // 使用单引号代替双引号,字符串是否使用单引号，默认为false，使用双引号\n  "proseWrap": "never", // preserve 默认值。因为使用了一些折行敏感型的渲染器（如GitHub comment）而按照markdown文本样式进行折行\n  "quoteProps": "as-needed",\n  "arrowParens": "avoid", // always  (x) => {} 箭头函数参数只有一个时是否要有小括号。avoid：省略括号\n  "bracketSpacing": true, // 在对象，数组括号与文字之间加空格 "{ foo: bar }"\n  "disableLanguages": ["vue"], // 不格式化vue文件，vue文件的格式化单独设置\n  "endOfLine": "lf", // 结尾是 \\n \\r \\n\\r auto\n  "eslintIntegration": false, //不让prettier使用eslint的代码格式进行校验\n  "htmlWhitespaceSensitivity": "strict",\n  "ignorePath": ".prettierignore", // 不使用prettier格式化的文件填写在项目的.prettierignore文件中\n  "jsxBracketSameLine": false, // 在jsx中把\'>\' 是否单独放一行\n  "jsxSingleQuote": false, // 在jsx中使用单引号代替双引号 在jsx中使用单引号代替双引号  "parser": "babylon", // 格式化的解析器，默认是babylon\n  "parser": "babylon", // 格式化的解析器，默认是babylon\n  "requireConfig": false, // Require a \'prettierconfig\' to format prettier\n  "insertPragma": false,\n  "requirePragma": false,\n  "rangeStart": 0,\n  "stylelintIntegration": false, //不让prettier使用stylelint的代码格式进行校验\n  "trailingComma": "es5", // 在对象或数组最后一个元素后面是否加逗号（在ES5中加尾逗号）\n  "tslintIntegration": false // 不让prettier使用tslint的代码格式进行校验\n}\n')])])]),a("p",[t._v("vscode 做如下修改")]),t._v(" "),a("p",[a("img",{attrs:{src:"/elcker/eadmin/%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/prettient-01.png",alt:"配置一"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/elcker/eadmin/%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/prettient-02.png",alt:"配置二"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);